## О проекте
Данный сервис был реализован в результате выполнения домашних работ по курсу Ozon Route 256
по направлению "Junior C#-разработчик". Назначение сервиса: вычисление стоимости доставки товара.
Поддерживает как HTTP API, так и gRPC API, умеет читать топики Kafka в бэкграунде.

## Описание сервиса
Сервис выполняет расчет стоимости доставки грузов на расстояние 1км. Расчет осуществляется на основе массогабаритных показателей.
Метод **POST /v1/delivery-prices/calculate** принимает запрос от пользователя (UserId), содержащий массив товаров, описанных габаритами и массой:
- длина (length), м
- ширина (width), м
- высота (height), м
- масса (weight), кг

По данным параметрам производится вычисление стоимости доставки на основе габаритов или веса, итоговое значение - максимальная стоимость из двух.
Товары, участвующие в расчете, и сам расчет сохраняется в БД с привязкой к пользователю.

Метод **POST /v1/delivery-prices/get-history** позволяет получить расчеты, которые производил пользователь (user_id).
Метод позволяет получать расчеты диапазоном, где `take` &mdash; сколько расчетов необходимо вернуть, `skip` &mdash; сколько расчетов необходимо пропустить, 
calculation_ids &mdash; конкретные ид расчетов, которые пользователь хочет получить.
Расчеты отсортированы по убыванию - от самого последнего к самому раннему.

Метод **POST /v1/delivery-prices/clear-history** позволяет пользователю частично или полностью очистить свою историю расчетов.

## Kafka
Чтение топиков, а также запись в них реализована в виде отдельных Background сервисов.  

`good_price_calc_requests` &mdash; топик, в который попадает запросы на расчет стоимости товара.  Формат сообщения: json.
Входные параметры соответствуют тем, что есть в последней версии API.

`good_price_calc` &mdash; топик, в который попадают результаты расчетов.

`good_price_calc_requests_dlq` &mdash; топик, в который складываются невалидные сообщения.

## gRPC
gRPC включает следующие методы:
- Унарный метод для расчета цены доставки товаров. Метод принимает запрос от пользователя (user_id), содержащий массив товаров, описанных габаритами и массой:
    - длина (length), м
    - ширина (width), м
    - высота (height), м
    - масса (weight), кг.

- Унарный метод удаления результата расчета. Метод принимает запрос, состоящий из user_id и массива идентификаторов расчетов для удаления.
- Server-streaming метод для получения истории расчетов. Метод принимает запрос, состоящий из user_id. В качестве ответа &mdash; стрим с историей расчетов, отсортированных от новых к старым.
- Bidirectional streaming метод для расчета. На входе стрим с запросами по одному товару, в ответ &mdash; стрим с результами расчета.
